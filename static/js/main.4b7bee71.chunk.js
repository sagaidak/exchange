(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/success.835f78d9.svg"},30:function(e,t,a){e.exports=a(48)},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(13),o=a.n(r),i=a(5),s=a(8),u=a(6),l=a(9),d=(a(39),a(4)),m=a.n(d),b=a(11),h=a(16),f=a(24),p=a.n(f),E=new function e(){var t=this;Object(h.a)(this,e),this.baseUrl="https://involve-it.com/test_front/api",this.fetchData=function(){var e=Object(b.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.baseUrl).concat(a));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postData=function(){var e=Object(b.a)(m.a.mark((function e(a){var n,c,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch("".concat(t.baseUrl).concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPaymentMethods=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/payMethods");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.calculate1=function(){var e=Object(b.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/payMethods/calculate?amount=".concat(a.amount.toString(),"&base=").concat(a.base.toString(),"&invoicePayMethod=").concat(a.invoicePayMethod.toString(),"&withdrawPayMethod=").concat(a.withdrawPayMethod.toString()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.calculate=p()(this.calculate1,1e3,{leading:!0}),this.createBid=function(){var e=Object(b.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postData("/bids",a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e,t){return{type:"CHANGE_METHOD",payload:{methodId:e,base:t}}},y=function(e,t){return{type:"CHANGE_AMOUNT",payload:{amount:e,base:t}}},w=function(e){return function(){e({type:"FETCH_PAYMETHODS_REQUEST"}),E.getPaymentMethods().then((function(t){e({type:"FETCH_PAYMETHODS_SUCCESS",payload:t}),e(v(t.invoice[0].id.toString(),"invoice")),e(v(t.withdraw[0].id.toString(),"withdraw"))})).catch((function(e){return console.log(e)}))}},O=(a(41),function(){return c.a.createElement("div",{className:"loader"})}),j=(a(42),function(e){var t=e.className,a=void 0===t?"":t,r=e.onChange,o=e.options,i=void 0===o?[]:o,s=i.length>0?i[0].name:"",u=Object(n.useState)(""),d=Object(l.a)(u,2),m=d[0],b=d[1],h=Object(n.useState)(!1),f=Object(l.a)(h,2),p=f[0],E=f[1],v="".concat(a," divSelect }"),y="selectWrapper ".concat(p?"":"hiddenOption");return c.a.createElement("div",{className:y},c.a.createElement("div",{className:v,onClick:function(){return E(!p)}},m||s),c.a.createElement("div",{className:"options"},i.map((function(e){return c.a.createElement("div",{key:e.id,onClick:function(){return function(e,t){b(t),r(e),E(!1)}(e.id.toString(),e.name)}},e.name)}))))}),g=Object(i.b)((function(e){return{payMethods:e.payMethods,bid:e.bid}}),(function(e){return{fetchPayMethods:w(e),changeMethod:function(t,a){return e(v(t,a))},fetchValue:function(t){return function(e,t){return function(){e(y(t.amount.toString(),t.base));var a="invoice"===t.base?"withdraw":"invoice";e({type:"FETCH_VALUE_REQUEST",payload:{base:a}}),E.calculate(t).then((function(t){e(y(t.amount.toString(),a)),e(function(e){return{type:"FETCH_VALUE_SUCCESS",payload:{base:e}}}(a))})).catch((function(e){return console.log(e)}))}}(e,t)()},clearInputs:function(){return e({type:"CLEAR_INPUTS"})}}}))((function(e){var t=e.fetchPayMethods,a=e.payMethods,r=e.changeMethod,o=e.bid,i=e.fetchValue,s=e.clearInputs,d=Object(n.useState)(!1),m=Object(l.a)(d,2),b=m[0],h=m[1],f=""===o.invoice.amount||""===o.withdraw.amount;if(Object(n.useEffect)((function(){s(),t()}),[t,s]),b)return c.a.createElement(u.a,{to:"/confirm"});var p=function(e){return c.a.createElement("div",{className:"col"},c.a.createElement("h2",null,"invoice"===e?"Sell":"Buy"),c.a.createElement(j,{onChange:function(t){return function(e,t){r(e,t),s()}(t,e)},options:a[e]}),c.a.createElement("input",{type:"text",value:o[e].amount,onChange:function(t){return function(e,t){if(Number(e)||""===e){var a={base:t,amount:Number(e),invoicePayMethod:Number(o.invoice.methodId),withdrawPayMethod:Number(o.withdraw.methodId)};i(a)}}(t.currentTarget.value,e)}}),o[e].isLoading&&c.a.createElement("div",{className:"spinner"},c.a.createElement(O,null)))};return c.a.createElement("div",{className:"form_wrapper"},c.a.createElement("form",{onSubmit:function(){""!==o.invoice.amount&&""!==o.withdraw.amount&&h(!0)}},c.a.createElement("div",{className:"row"},p("invoice"),p("withdraw")),c.a.createElement("div",{className:"row-buttons"},c.a.createElement("button",{type:"submit",disabled:f,className:"button"},"Exchange"))))})),S=function(){return c.a.createElement(g,null)},C=(a(44),Object(i.b)((function(e){return{bid:e.bid,success:e.success}}),(function(e){return{createBid:function(t){return function(e,t){return function(){e({type:"CREATE_BID_REQUEST"}),E.createBid(t).then((function(t){e({type:"CREATE_BID_SUCCESS",payload:{message:t.message}})}))}}(e,t)()}}}))((function(e){var t=e.bid,a=e.createBid,r=e.success,o=t.invoice,i=t.withdraw,s=t.base,d=Object(n.useState)(!1),m=Object(l.a)(d,2),b=m[0],h=m[1];if(!o.amount||!i.amount)return c.a.createElement(u.a,{to:"/"});if(b)return c.a.createElement(u.a,{to:"/"});if(r.message)return c.a.createElement(u.a,{to:"/success"});return c.a.createElement("div",{className:"form_wrapper confirm"},c.a.createElement("h2",null,"Details"),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"base"},"Sell"),c.a.createElement("div",null,o.amount," ",o.methodName)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"base"},"Buy"),c.a.createElement("div",null,i.amount," ",i.methodName)),c.a.createElement("div",{className:"row"},c.a.createElement("button",{type:"button",className:"button cancel",onClick:function(){h(!0)}},"Cancel"),c.a.createElement("button",{type:"button",className:"button",onClick:function(){var e={amount:Number(t[s].amount),base:s,invoicePayMethod:Number(o.methodId),withdrawPayMethod:Number(i.methodId)};a(e)}},"Confirm")))}))),N=function(){return c.a.createElement(C,null)},_=a(26),M=a.n(_),T=(a(45),Object(i.b)((function(e){return{success:e.success}}),{})((function(e){var t=e.success;return""===t.message?c.a.createElement(u.a,{to:"/"}):c.a.createElement("div",{className:"form_wrapper success"},c.a.createElement("img",{src:M.a,alt:"Success"}),c.a.createElement("h2",null,t.message),c.a.createElement("div",null,"Your exchange order has been placed successfully and will be processed soon."),c.a.createElement(s.b,{to:"/"},c.a.createElement("button",{className:"button"},"Home")))}))),U=function(){return c.a.createElement(T,null)},x=(a(46),function(){return c.a.createElement("div",{className:"main"},c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/",component:S,exact:!0}),c.a.createElement(u.b,{path:"/confirm",component:N,exact:!0}),c.a.createElement(u.b,{path:"/success",component:U,exact:!0})))}),A=a(27),H=a(28),P=a(29),I=(a(47),function(){return c.a.createElement("div",null,"Error!")}),D=function(e){Object(P.a)(a,e);var t=Object(H.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(A.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement(I,null):this.props.children}}]),a}(n.Component),L=a(15),k=a(7),R=a(1),B={payMethods:{invoice:[],withdraw:[],isLoading:!1},bid:{base:"",invoice:{methodName:"",methodId:"",amount:"",isLoading:!1},withdraw:{methodName:"",methodId:"",amount:"",isLoading:!1}},success:{message:"",isLoading:!1}},F=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_PAYMETHODS_REQUEST":return Object(R.a)({},t,{payMethods:Object(R.a)({},t.payMethods,{isLoading:!0})});case"FETCH_PAYMETHODS_SUCCESS":var n=a.payload,c=n.invoice,r=n.withdraw;return Object(R.a)({},t,{payMethods:{isLoading:!1,invoice:c,withdraw:r}});case"CHANGE_METHOD":var o=a.payload,i=o.base,s=o.methodId,u=null===(e=t.payMethods[i].find((function(e){return e.id.toString()===s})))||void 0===e?void 0:e.name;return Object(R.a)({},t,{bid:Object(R.a)({},t.bid,Object(k.a)({},i,Object(R.a)({},t.bid[i],{methodId:s,methodName:u})))});case"CHANGE_AMOUNT":var l=a.payload,d=l.base,m=l.amount;return Object(R.a)({},t,{bid:Object(R.a)({},t.bid,Object(k.a)({},d,Object(R.a)({},t.bid[d],{amount:m})))});case"FETCH_VALUE_REQUEST":var b=a.payload.base;return Object(R.a)({},t,{bid:Object(R.a)({},t.bid,Object(k.a)({},b,Object(R.a)({},t.bid[b],{isLoading:!0})))});case"FETCH_VALUE_SUCCESS":var h,f=a.payload.base,p="invoice"===f?"withdraw":"invoice";return Object(R.a)({},t,{bid:Object(R.a)({},t.bid,(h={},Object(k.a)(h,f,Object(R.a)({},t.bid[f],{isLoading:!1})),Object(k.a)(h,"base",p),h))});case"CREATE_BID_REQUEST":return Object(R.a)({},t,{success:Object(R.a)({},t.success,{isLoading:!0})});case"CREATE_BID_SUCCESS":return Object(R.a)({},t,{success:{isLoading:!1,message:a.payload.message}});case"CLEAR_INPUTS":return Object(R.a)({},t,{success:Object(R.a)({},t.success,{message:""}),bid:Object(R.a)({},t.bid,{base:"",invoice:Object(R.a)({},t.bid.invoice,{amount:""}),withdraw:Object(R.a)({},t.bid.withdraw,{amount:""})})});default:return t}},Q=Object(L.b)(F);o.a.render(c.a.createElement(i.a,{store:Q},c.a.createElement(D,null,c.a.createElement(s.a,{basename:"/exchange/"},c.a.createElement(x,null)))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4b7bee71.chunk.js.map