(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/success.835f78d9.svg"},29:function(e,t,a){e.exports=a(46)},38:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=a(5),s=a(8),u=a(6),d=a(16),l=(a(38),a(4)),m=a.n(l),b=a(10),h=a(15),f=new function e(){var t=this;Object(h.a)(this,e),this.baseUrl="https://involve-it.com/test_front/api",this.fetchData=function(){var e=Object(b.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.baseUrl).concat(a));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postData=function(){var e=Object(b.a)(m.a.mark((function e(a){var n,r,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,fetch("".concat(t.baseUrl).concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPaymentMethods=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/payMethods");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.calculate=function(){var e=Object(b.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/payMethods/calculate?amount=".concat(a.amount.toString(),"&base=").concat(a.base.toString(),"&invoicePayMethod=").concat(a.invoicePayMethod.toString(),"&withdrawPayMethod=").concat(a.withdrawPayMethod.toString()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createBid=function(){var e=Object(b.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postData("/bids",a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t){return{type:"CHANGE_METHOD",payload:{methodId:e,base:t}}},E=function(e,t){return{type:"CHANGE_AMOUNT",payload:{amount:e,base:t}}},v=function(e){return function(){e({type:"FETCH_PAYMETHODS_REQUEST"}),f.getPaymentMethods().then((function(t){e({type:"FETCH_PAYMETHODS_SUCCESS",payload:t}),e(p(t.invoice[0].id.toString(),"invoice")),e(p(t.withdraw[0].id.toString(),"withdraw"))})).catch((function(e){return console.log(e)}))}},y=(a(40),function(){return r.a.createElement("div",{className:"loader"})}),w=Object(i.b)((function(e){return{payMethods:e.payMethods,bid:e.bid}}),(function(e){return{fetchPayMethods:v(e),changeMethod:function(t,a){return e(p(t,a))},fetchValue:function(t){return function(e,t){return function(){e(E(t.amount.toString(),t.base));var a="invoice"===t.base?"withdraw":"invoice";e({type:"FETCH_VALUE_REQUEST",payload:{base:a}}),f.calculate(t).then((function(t){e(E(t.amount.toString(),a)),e(function(e){return{type:"FETCH_VALUE_SUCCESS",payload:{base:e}}}(a))})).catch((function(e){return console.log(e)}))}}(e,t)()},clearInputs:function(){return e({type:"CLEAR_INPUTS"})}}}))((function(e){var t=e.fetchPayMethods,a=e.payMethods,c=e.changeMethod,o=e.bid,i=e.fetchValue,s=e.clearInputs,l=Object(n.useState)(!1),m=Object(d.a)(l,2),b=m[0],h=m[1],f=""===o.invoice.amount||""===o.withdraw.amount;if(Object(n.useEffect)((function(){s(),t()}),[t]),b)return r.a.createElement(u.a,{to:"/confirm"});var p=function(e){return r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"invoice"===e?"Sell":"Buy"),r.a.createElement("select",{onChange:function(t){return function(e,t){c(e.currentTarget.value,t)}(t,e)},value:o[e].methodId},a[e].map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("input",{type:"text",value:o[e].amount,onChange:function(t){return function(e,t){var a=e.currentTarget.value;if(Number(a)||""===a){var n={base:t,amount:Number(a),invoicePayMethod:Number(o.invoice.methodId),withdrawPayMethod:Number(o.withdraw.methodId)};i(n)}}(t,e)}}),o[e].isLoading&&r.a.createElement("div",{className:"spinner"},r.a.createElement(y,null)))};return r.a.createElement("div",{className:"form_wrapper"},r.a.createElement("form",{onSubmit:function(){""!==o.invoice.amount&&""!==o.withdraw.amount&&h(!0)}},r.a.createElement("div",{className:"row"},p("invoice"),p("withdraw")),r.a.createElement("div",{className:"row-buttons"},r.a.createElement("button",{type:"submit",disabled:f,className:"button"},"Exchange"))))})),O=function(){return r.a.createElement(w,null)},g=(a(42),Object(i.b)((function(e){return{bid:e.bid,success:e.success}}),(function(e){return{createBid:function(t){return function(e,t){return function(){e({type:"CREATE_BID_REQUEST"}),f.createBid(t).then((function(t){e({type:"CREATE_BID_SUCCESS",payload:{message:t.message}})}))}}(e,t)()}}}))((function(e){var t=e.bid,a=e.createBid,c=e.success,o=t.invoice,i=t.withdraw,s=t.base,l=Object(n.useState)(!1),m=Object(d.a)(l,2),b=m[0],h=m[1];if(!o.amount||!i.amount)return r.a.createElement(u.a,{to:"/"});if(b)return r.a.createElement(u.a,{to:"/"});if(c.message)return r.a.createElement(u.a,{to:"/success"});return r.a.createElement("div",{className:"form_wrapper confirm"},r.a.createElement("h2",null,"Details"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"base"},"Sell"),r.a.createElement("div",null,o.amount," ",o.methodName)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"base"},"Buy"),r.a.createElement("div",null,i.amount," ",i.methodName)),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"button cancel",onClick:function(){h(!0)}},"Cancel"),r.a.createElement("button",{type:"button",className:"button",onClick:function(){var e={amount:Number(t[s].amount),base:s,invoicePayMethod:Number(o.methodId),withdrawPayMethod:Number(i.methodId)};a(e)}},"Confirm")))}))),j=function(){return r.a.createElement(g,null)},S=a(25),C=a.n(S),N=(a(43),Object(i.b)((function(e){return{success:e.success}}),{})((function(e){var t=e.success;return""===t.message?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",{className:"form_wrapper success"},r.a.createElement("img",{src:C.a}),r.a.createElement("h2",null,t.message),r.a.createElement("div",null,"Your exchange order has been placed successfully and will be processed soon."),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"button"},"Home")))}))),_=function(){return r.a.createElement(N,null)},M=(a(44),function(){return r.a.createElement("div",{className:"main"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:O,exact:!0}),r.a.createElement(u.b,{path:"/confirm",component:j,exact:!0}),r.a.createElement(u.b,{path:"/success",component:_,exact:!0})))}),T=a(26),U=a(27),x=a(28),A=(a(45),function(){return r.a.createElement("div",null,"Error!")}),H=function(e){Object(x.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(T.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(A,null):this.props.children}}]),a}(n.Component),I=a(14),P=a(7),D=a(1),L={payMethods:{invoice:[],withdraw:[],isLoading:!1},bid:{base:"",invoice:{methodName:"",methodId:"",amount:"",isLoading:!1},withdraw:{methodName:"",methodId:"",amount:"",isLoading:!1}},success:{message:"",isLoading:!1}},k=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_PAYMETHODS_REQUEST":return Object(D.a)({},t,{payMethods:Object(D.a)({},t.payMethods,{isLoading:!0})});case"FETCH_PAYMETHODS_SUCCESS":var n=a.payload,r=n.invoice,c=n.withdraw;return Object(D.a)({},t,{payMethods:{isLoading:!1,invoice:r,withdraw:c}});case"CHANGE_METHOD":var o=a.payload,i=o.base,s=o.methodId,u=null===(e=t.payMethods[i].find((function(e){return e.id.toString()===s})))||void 0===e?void 0:e.name;return Object(D.a)({},t,{bid:Object(D.a)({},t.bid,Object(P.a)({},i,Object(D.a)({},t.bid[i],{methodId:s,methodName:u})))});case"CHANGE_AMOUNT":var d=a.payload,l=d.base,m=d.amount;return Object(D.a)({},t,{bid:Object(D.a)({},t.bid,Object(P.a)({},l,Object(D.a)({},t.bid[l],{amount:m})))});case"FETCH_VALUE_REQUEST":var b=a.payload.base;return Object(D.a)({},t,{bid:Object(D.a)({},t.bid,Object(P.a)({},b,Object(D.a)({},t.bid[b],{isLoading:!0})))});case"FETCH_VALUE_SUCCESS":var h,f=a.payload.base,p="invoice"===f?"withdraw":"invoice";return Object(D.a)({},t,{bid:Object(D.a)({},t.bid,(h={},Object(P.a)(h,f,Object(D.a)({},t.bid[f],{isLoading:!1})),Object(P.a)(h,"base",p),h))});case"CREATE_BID_REQUEST":return Object(D.a)({},t,{success:Object(D.a)({},t.success,{isLoading:!0})});case"CREATE_BID_SUCCESS":return Object(D.a)({},t,{success:{isLoading:!1,message:a.payload.message}});case"CLEAR_INPUTS":return Object(D.a)({},t,{success:Object(D.a)({},t.success,{message:""}),bid:Object(D.a)({},t.bid,{base:"",invoice:Object(D.a)({},t.bid.invoice,{amount:""}),withdraw:Object(D.a)({},t.bid.withdraw,{amount:""})})});default:return t}},R=Object(I.b)(k);o.a.render(r.a.createElement(i.a,{store:R},r.a.createElement(H,null,r.a.createElement(s.a,{basename:"/exchange/"},r.a.createElement(M,null)))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.9e9fd22a.chunk.js.map