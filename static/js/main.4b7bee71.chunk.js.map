{"version":3,"sources":["components/success-form/success.svg","actions/index.ts","services/involve-api-service.ts","components/spinner/spinner.tsx","components/select/select.tsx","components/exchange-form/exchange-form.tsx","components/pages/exchange.tsx","components/confirm-form/confirm-form.tsx","components/pages/confirm.tsx","components/success-form/success-form.tsx","components/pages/success.tsx","components/app/app.tsx","components/error-indicator/error-indicator.tsx","components/error-boundry/error-boundry.tsx","reducers/index.ts","store.ts","index.tsx"],"names":["module","exports","involveApiService","baseUrl","fetchData","URI","a","fetch","res","ok","Error","status","json","postData","data","method","headers","body","JSON","stringify","response","getPaymentMethods","calculate1","query","amount","toString","base","invoicePayMethod","withdrawPayMethod","calculate","debounce","this","createBid","changeMethod","methodId","type","payload","changeAmount","fetchPayMethods","dispatch","then","invoice","id","withdraw","catch","err","console","log","Spinner","className","Select","props","onChange","options","defaultName","length","name","useState","setName","showOptions","setShowOptions","selectClass","wrapperClass","onClick","map","x","key","v","handleOptionClick","connect","payMethods","bid","fetchValue","baseChanged","valueLoaded","clearInputs","redirect","setRedirect","disabled","useEffect","to","renderCol","field","handleSelectChange","value","e","Number","handleInputChange","currentTarget","isLoading","onSubmit","Exchange","success","message","methodName","Confirm","src","icon","alt","Success","App","path","component","exact","ErrorIndicator","ErrorBoundry","state","hasError","setState","children","Component","initialState","reducer","action","find","store","createStore","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.4b7bee71.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/success.835f78d9.svg\";","import { Dispatch } from \"redux\";\nimport InvolveApiService, { PayMethodResponse, Base, CalculateQuery, CalculateResponse, CreateBidQuery, CreateBidResponse } from \"../services/involve-api-service\";\n\nconst involveApiService = new InvolveApiService()\n\nexport const FETCH_PAYMETHODS_REQUEST = 'FETCH_PAYMETHODS_REQUEST'\nexport const FETCH_PAYMETHODS_SUCCESS = 'FETCH_PAYMETHODS_SUCCESS'\nexport const CHANGE_METHOD = 'CHANGE_METHOD'\nexport const FETCH_VALUE_REQUEST = 'FETCH_VALUE_REQUEST'\nexport const FETCH_VALUE_SUCCESS = 'FETCH_VALUE_SUCCESS'\nexport const CHANGE_AMOUNT = 'CHANGE_AMOUNT'\nexport const CREATE_BID_REQUEST = 'CREATE_BID_REQUEST'\nexport const CREATE_BID_SUCCESS = 'CREATE_BID_SUCCESS'\nexport const CLEAR_INPUTS = 'CLEAR_INPUTS'\n\ninterface PayMethodRequestedAction { type: typeof FETCH_PAYMETHODS_REQUEST }\n\ninterface PayMethodsLoadedAction {\n  type: typeof FETCH_PAYMETHODS_SUCCESS\n  payload: PayMethodResponse\n}\n\nexport interface ChangeMethod {\n  type: typeof CHANGE_METHOD\n  payload: { \n    methodId: string\n    base: Base\n  }\n}\n\ninterface ChangeAmount {\n  type: typeof CHANGE_AMOUNT\n  payload: { \n    amount: string\n    base: Base\n  }\n}\n\ninterface ValueRequestedAction { \n  type: typeof FETCH_VALUE_REQUEST,\n  payload: {\n    base: Base\n  }\n}\n\ninterface ValueLoadedAction {\n  type: typeof FETCH_VALUE_SUCCESS,\n  payload: {\n    base: Base\n  }\n}\n\ninterface CreateBidRequest {\n  type: typeof CREATE_BID_REQUEST\n}\n\ninterface CreateBidLoadedAction {\n  type: typeof CREATE_BID_SUCCESS,\n  payload: { message: string }\n}\n\nexport interface ClearInputs {\n  type: typeof CLEAR_INPUTS\n}\n\nexport type ActionTypes = \n  PayMethodRequestedAction | \n  PayMethodsLoadedAction | \n  ChangeMethod | \n  ValueRequestedAction |\n  ValueLoadedAction |\n  ChangeAmount |\n  CreateBidRequest |\n  CreateBidLoadedAction |\n  ClearInputs\n\nconst payMethodRequested = (): PayMethodRequestedAction => {\n  return {\n    type: FETCH_PAYMETHODS_REQUEST\n  }\n};\n\nconst payMethodsLoaded = (payMethods: PayMethodResponse): PayMethodsLoadedAction => {\n  return {\n    type: FETCH_PAYMETHODS_SUCCESS,\n    payload: payMethods\n  };\n};\n\nexport const changeMethod = (methodId: string, base: Base): ChangeMethod => {\n  return {\n    type: CHANGE_METHOD,\n    payload: { methodId, base }\n  }\n}\n\nconst changeAmount = (amount: string, base: Base): ChangeAmount => {\n  return {\n    type: CHANGE_AMOUNT,\n    payload: { amount, base }\n  }\n}\n\nconst valueRequested = (base: Base): ValueRequestedAction => {\n  return {\n    type: FETCH_VALUE_REQUEST,\n    payload: { base }\n  }\n}\n\nconst valueLoaded = (base: Base): ValueLoadedAction => {\n  return {\n    type: FETCH_VALUE_SUCCESS,\n    payload: { base }\n  };\n}\n\nconst createBidRequested = (): CreateBidRequest => {\n  return {\n    type: CREATE_BID_REQUEST\n  }\n}\n\nconst createBidLoaded = (message: string): CreateBidLoadedAction => {\n  return {\n    type: CREATE_BID_SUCCESS,\n    payload: { message }\n  }\n}\n\nexport const clearInputs = (): ClearInputs => {\n  return {\n    type: CLEAR_INPUTS\n  }\n}\n\nexport const createBid = (dispatch: Dispatch, query: CreateBidQuery) => () => {\n  dispatch(createBidRequested())\n  involveApiService.createBid(query)\n    .then((data: CreateBidResponse) => {\n      dispatch(createBidLoaded(data.message))\n    })\n}\n\nexport const fetchValue = (dispatch: Dispatch, query: CalculateQuery) => () => {\n  dispatch(changeAmount(query.amount.toString(), query.base))\n  const baseChanged = query.base === 'invoice' ? 'withdraw' : 'invoice'\n  dispatch(valueRequested(baseChanged));\n\n  involveApiService.calculate(query)\n    .then((data: CalculateResponse) => { \n      dispatch(changeAmount(data.amount.toString(), baseChanged))\n      dispatch(valueLoaded(baseChanged)) \n    })\n    .catch((err: any) => console.log(err));\n}\n\nexport const fetchPayMethods = (dispatch: Dispatch) => () => {\n  dispatch(payMethodRequested());\n  involveApiService.getPaymentMethods()\n    .then((data: PayMethodResponse) => {\n      dispatch(payMethodsLoaded(data))\n      dispatch(changeMethod(data.invoice[0].id.toString(), 'invoice'))\n      dispatch(changeMethod(data.withdraw[0].id.toString(), 'withdraw'))\n    })\n    .catch((err: any) => console.log(err));\n}\n","// API BASE URL: https://involve-it.com/test_front/api (CORS are allowed)\n\nimport debounce from \"lodash.debounce\"\n\n// Method: GET\n// URI: /payMethods\n\nexport interface PayMethod {\n  id: number;\n  name: string;\n}\n \nexport interface PayMethodResponse {\n  invoice: PayMethod[];\n  withdraw: PayMethod[];\n}\n\n// Method: GET\n// URI: /payMethods/calculate\nexport type Base = 'invoice' | 'withdraw'\n\nexport interface CalculateQuery {\n  base: Base;\n  amount: number;\n  invoicePayMethod: number;\n  withdrawPayMethod: number;\n}\n \nexport interface CalculateResponse {\n  amount: number;\n}\n\n// Method: POST\n// URI: /bids\n\nexport interface CreateBidQuery {\n  amount: number;\n  base: Base;\n  invoicePayMethod: number;\n  withdrawPayMethod: number;\n}\n\nexport interface CreateBidResponse {\n  message: string\n}\n\nexport default class InvolveApiService {\n  baseUrl = 'https://involve-it.com/test_front/api'\n\n  fetchData = async (URI: string) => {\n    const res = await fetch(`${this.baseUrl}${URI}`)\n    \n    if (!res.ok) {\n      throw new Error(`Could not fetch ${URI}` +\n        `, received ${res.status}`)\n    }\n    return await res.json();\n  }\n\n  postData = async (URI: string, data = {}) => {\n    const response = await fetch(`${this.baseUrl}${URI}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n    return await response.json(); \n  }\n\n  getPaymentMethods = async () => {\n    return await this.fetchData('/payMethods')\n  }\n\n  calculate1 = async (query: CalculateQuery) => {\n    return await this.fetchData(`/payMethods/calculate?amount=${query.amount.toString()}&base=${query.base.toString()}&invoicePayMethod=${query.invoicePayMethod.toString()}&withdrawPayMethod=${query.withdrawPayMethod.toString()}`)\n  }\n\n  calculate = debounce(this.calculate1, 1000, {\n    'leading': true\n  })\n\n  createBid = async (query: CreateBidQuery) => {\n    return await this.postData('/bids', query)\n  }\n}","import React from 'react'\nimport './spinner.css'\n\nconst Spinner = () => {\n  return <div className=\"loader\"></div>\n}\n\nexport default Spinner","import React, { useState } from 'react'\nimport './select.css'\nimport { PayMethod } from '../../services/involve-api-service'\n\ntype Props = {\n  className?: string\n  onChange: (v: string) => void\n  options: PayMethod[]\n}\n\nconst Select = (props: Props) => {\n  const { className = '', onChange, options = [] } = props\n  const defaultName = options.length > 0 ? options[0].name : ''\n  const [ name, setName ] = useState('')\n  const [ showOptions, setShowOptions ] = useState(false)\n\n  const handleOptionClick = (v: string, name: string) => {\n    setName(name)\n    onChange(v)\n    setShowOptions(false)\n  }\n\n  const selectClass = `${className} divSelect }`\n  const wrapperClass = `selectWrapper ${showOptions ? '' : 'hiddenOption'}`\n\n  return <div className={wrapperClass}>\n    <div className={selectClass} onClick={() => setShowOptions(!showOptions)}>{name ? name : defaultName}</div>\n      <div className={'options'}  > \n      {\n        options.map((x: PayMethod) => <div \n          key={x.id} \n          onClick={() => handleOptionClick(x.id.toString(), x.name)}\n        >{x.name}</div>)\n      }\n      </div>\n    </div>\n}\n\nexport default Select","import React, { useEffect, useState } from 'react'\nimport './exchange-form.css'\nimport { connect } from 'react-redux'\nimport { Dispatch } from 'redux'\nimport { fetchPayMethods, changeMethod, fetchValue, ChangeMethod, clearInputs, ClearInputs } from '../../actions'\nimport { Base, CalculateQuery } from '../../services/involve-api-service'\nimport { Redirect } from 'react-router-dom'\nimport { State, PayMethodsState, BidState } from '../../reducers'\nimport Spinner from '../spinner/spinner'\nimport Select from '../select/select'\n\ninterface Props {\n  payMethods: PayMethodsState\n  bid: BidState\n  fetchPayMethods: () => void\n  changeMethod: (id: string, base: Base) => ChangeMethod\n  fetchValue: (query: CalculateQuery) => void\n  clearInputs: () => ClearInputs\n}\n\nconst ExchangeForm = (props: Props) => {\n  const {\n    fetchPayMethods, \n    payMethods, \n    changeMethod,\n    bid,\n    fetchValue,\n    clearInputs\n  } = props\n\n  const [ redirect, setRedirect ] = useState(false)\n\n  const disabled = bid.invoice.amount === '' || bid.withdraw.amount === ''\n\n  useEffect(() => {\n    clearInputs()\n    fetchPayMethods()\n  }, [fetchPayMethods, clearInputs])\n\n  if (redirect) return <Redirect to=\"/confirm\" />\n\n  const handleInputChange = (v: string, field: Base) => {\n\n    if (!Number(v) && v !== '') return\n\n    const query = {\n      base: field,\n      amount: Number(v),\n      invoicePayMethod: Number(bid.invoice.methodId),\n      withdrawPayMethod: Number(bid.withdraw.methodId)\n    }\n\n    fetchValue(query)\n  }\n\n  const handleSelectChange = (v: string, field: Base) => {\n    changeMethod(v, field)\n    clearInputs()\n  }\n\n  const handleSubmit = () => {\n    if (bid.invoice.amount !== '' && bid.withdraw.amount !== '') {\n      setRedirect(true)\n    }\n  }\n\n  const renderCol = (field: Base) => {\n\n    return <div className='col'>\n      <h2>{field === 'invoice' ? 'Sell' : 'Buy'}</h2>\n      <Select \n        onChange={(v: string) => handleSelectChange(v, field)} \n        options={payMethods[field]} />\n      <input type=\"text\" value={bid[field].amount} onChange={(e) => handleInputChange(e.currentTarget.value, field)} />\n      {bid[field].isLoading && <div className='spinner'><Spinner /></div>}\n    </div>\n  }\n\n  return <div className='form_wrapper'>\n    <form onSubmit={handleSubmit}>\n      <div className='row'>\n        {renderCol('invoice')}\n        {renderCol('withdraw')}\n      </div>\n      <div className='row-buttons'>\n        <button\n          type=\"submit\"\n          disabled={disabled}\n          className='button'\n        >\n          Exchange\n        </button>\n      </div>\n    </form>\n    \n  </div>\n}\n\nconst mapStateToProps = ({ payMethods, bid }: State) => {\n  return { payMethods, bid };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    fetchPayMethods: fetchPayMethods(dispatch),\n    changeMethod: (id: string, base: Base) => dispatch(changeMethod(id, base)),\n    fetchValue: (query: CalculateQuery) => fetchValue(dispatch, query)(),\n    clearInputs: () => dispatch(clearInputs())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExchangeForm)","import React from 'react'\nimport ExchangeForm from '../exchange-form/exchange-form'\n\nconst Exchange = () => {\n  return <ExchangeForm />\n}\n\nexport default Exchange","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Dispatch } from 'redux'\nimport { Redirect } from 'react-router-dom'\nimport { createBid } from '../../actions'\nimport { CreateBidQuery, Base } from '../../services/involve-api-service'\nimport { State, BidState, SuccessState } from '../../reducers'\nimport './confirm-form.css'\n\ntype Props = {\n  createBid: (query: CreateBidQuery) => void\n  bid: BidState\n  success: SuccessState\n}\n\nconst ConfirmForm = (props: Props) => {\n  const { bid, createBid, success } = props\n  const { invoice, withdraw, base } = bid\n\n  const [ redirect, setRedirect ] = useState(false)\n\n  if (!invoice.amount || !withdraw.amount) return <Redirect to='/' />\n  if (redirect) return <Redirect to={'/'} />\n  if (success.message) return <Redirect to={'/success'} />\n\n  const handleCancel = () => {\n    setRedirect(true)\n  }\n\n  const handleConfirm = () => {\n    const query = {\n      amount: Number(bid[base as Base].amount),\n      base: base as Base,\n      invoicePayMethod: Number(invoice.methodId),\n      withdrawPayMethod: Number(withdraw.methodId)\n    }\n    createBid(query)\n  }\n\n  return <div className='form_wrapper confirm'>\n    <h2>Details</h2>\n    <div className='row'>\n      <div className='base'>Sell</div><div>{invoice.amount} {invoice.methodName}</div>\n    </div>\n    <div className='row'>\n      <div className='base'>Buy</div><div>{withdraw.amount} {withdraw.methodName}</div>\n    </div>\n    <div className='row'>\n      <button type=\"button\" className='button cancel' onClick={handleCancel}>Cancel</button>\n      <button type=\"button\" className='button' onClick={handleConfirm}>Confirm</button>\n    </div>\n    \n  </div>\n}\n\nconst mapStateToProps = ({ bid, success }: State) => {\n  return {\n    bid, success\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    createBid: (query: CreateBidQuery) => createBid(dispatch, query)()\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmForm)","import React from 'react'\nimport ConfirmForm from '../confirm-form/confirm-form'\n\nconst Confirm = () => {\n  return <ConfirmForm />\n}\n\nexport default Confirm","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect, NavLink } from 'react-router-dom'\nimport { State, SuccessState } from '../../reducers'\nimport icon from './success.svg'\nimport './success-form.css'\n\ntype Props = {\n  success: SuccessState\n}\n\nconst SuccessForm = (props: Props) => {\n  const { success } = props\n\n  if (success.message === '') return <Redirect to='/' />\n\n  return <div className='form_wrapper success'>\n    <img src={icon} alt='Success'/>\n    <h2>{success.message}</h2>\n    <div>\n      Your exchange order has been placed successfully and will be processed soon.\n    </div>\n    <NavLink to='/'><button className='button'>Home</button></NavLink>\n  </div>\n}\n\nconst mapStateToProps = ({ success }: State) => {\n  return {\n    success\n  }\n}\n\nexport default connect(mapStateToProps, {})(SuccessForm)","import React from 'react'\nimport SuccessForm from '../success-form/success-form'\n\nconst Success = () => {\n  return <SuccessForm />\n}\n\n\nexport default Success","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Exchange from '../pages/exchange'\nimport Confirm from '../pages/confirm'\nimport Success from '../pages/success'\nimport './app.css';\n\nconst App = () => {\n  return (\n    <div className='main'>\n      <Switch>\n        <Route\n          path=\"/\"\n          component={Exchange}\n          exact />\n        <Route\n          path=\"/confirm\"\n          component={Confirm}\n          exact />\n        <Route\n          path=\"/success\"\n          component={Success}\n          exact />\n\n      </Switch>\n    </div>\n  );\n};\n\nexport default App;","import React from 'react'\nimport './error-indicator.css'\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator","import React, { Component } from 'react'\nimport ErrorIndicator from '../error-indicator/error-indicator'\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />\n    }\n\n    return this.props.children\n  }\n}","import { ActionTypes, FETCH_PAYMETHODS_SUCCESS, FETCH_PAYMETHODS_REQUEST, CHANGE_METHOD, FETCH_VALUE_REQUEST, FETCH_VALUE_SUCCESS, CHANGE_AMOUNT, CREATE_BID_REQUEST, CREATE_BID_SUCCESS, CLEAR_INPUTS } from \"../actions\";\nimport { PayMethod } from \"../services/involve-api-service\";\n\nconst initialState = {\n  payMethods: {\n    invoice: [] as PayMethod[],\n    withdraw: [] as PayMethod[],\n    isLoading: false\n  },\n\n  bid: {\n    base: '',\n    invoice: {\n      methodName: '',\n      methodId: '',\n      amount: '',\n      isLoading: false\n    },\n    withdraw: {\n      methodName: '',\n      methodId: '',\n      amount: '',\n      isLoading: false\n    }\n  },\n\n  success: {\n    message: '',\n    isLoading: false\n  }\n};\n\nexport type State = typeof initialState\nexport type PayMethodsState = typeof initialState.payMethods\nexport type BidState = typeof initialState.bid\nexport type SuccessState = typeof initialState.success\n\nconst reducer = (state = initialState, action: ActionTypes) => {\n\n  switch (action.type) {\n    case FETCH_PAYMETHODS_REQUEST:\n      return {...state, payMethods: { ...state.payMethods, isLoading: true }}\n    \n    case FETCH_PAYMETHODS_SUCCESS:\n      const { invoice, withdraw } = action.payload\n\n      return {...state, payMethods: { \n          isLoading: false, \n          invoice,\n          withdraw\n        }\n      }\n\n    case CHANGE_METHOD:\n      const { base, methodId } = action.payload\n      const methodName = state.payMethods[base].find((x) => x.id.toString() === methodId)?.name\n\n      return {...state, bid: {\n          ...state.bid,\n          [base]: { ...state.bid[base], methodId, methodName }\n        }\n      }\n\n    case CHANGE_AMOUNT: {\n      const { base, amount } = action.payload\n\n      return {...state, bid: {\n          ...state.bid,\n          [base]: { ...state.bid[base], amount }\n        }\n      }\n    }\n\n    case FETCH_VALUE_REQUEST: {\n      const { base } = action.payload\n      return {...state, bid: {\n          ...state.bid,\n          [base]: { ...state.bid[base], isLoading: true }\n        }\n      }\n    }\n\n    case FETCH_VALUE_SUCCESS: {\n      const { base } = action.payload\n      const baseChanged = base === 'invoice' ? 'withdraw' : 'invoice'\n      return {...state, bid: {\n          ...state.bid,\n          [base]: { ...state.bid[base], isLoading: false },\n          base: baseChanged\n        }\n      }\n    }\n\n    case CREATE_BID_REQUEST:\n      return {...state, success: {\n          ...state.success,\n          isLoading: true\n        }\n      }\n    \n    case CREATE_BID_SUCCESS:\n      return {...state, success: {\n          isLoading: false,\n          message: action.payload.message\n        }\n      }\n    \n    case CLEAR_INPUTS: {\n      return {...state, success:{\n          ...state.success,\n          message: ''\n        },\n        bid: {\n          ...state.bid,\n          base: '',\n          invoice: {\n            ...state.bid.invoice,\n            amount: ''\n          },\n          withdraw: {\n            ...state.bid.withdraw,\n            amount: ''\n          }\n        }\n      }\n    }\n    default:\n      return state\n  }\n};\n\nexport default reducer","import { createStore } from 'redux';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './components/app/app';\nimport ErrorBoundry from './components/error-boundry/error-boundry';\nimport store from './store';\n\n/* \n  Здарвствуйте, \n  напишите пожалуйста фидбек.\n\n  Старался использовать как можно меньше библиотек\n*/\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n        <Router basename='/exchange/'>\n          <App />\n        </Router>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}